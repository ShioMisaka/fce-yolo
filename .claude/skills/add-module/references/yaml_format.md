# YAML 配置文件格式

YOLO 模型配置文件使用列表格式定义网络结构。

## 基本格式

```yaml
# [from, repeats, module, args]
- [-1, 1, Conv, [64, 3, 2]]  # 0-P1/2
```

| 字段 | 含义 |
|------|------|
| `from` | 输入层索引 |
| `repeats` | 重复次数 |
| `module` | 模块类名 |
| `args` | 模块参数列表 |

## from 字段

| 值 | 含义 |
|-----|------|
| `-1` | 上一层的输出 |
| `[-1, 6]` | 融合第 -1 层和第 6 层的输出 |
| `[0, 1, 2]` | 融合多层输出 |

```yaml
# 单输入
- [-1, 1, YourModule, [256]]

# 多输入融合
- [[-1, 6], 1, BiFPN_Concat, []]

# 跨层跳跃连接
- [[-1, 14, 15], 1, YourModule, [512]]
```

## args 字段

参数列表格式取决于模块定义，常见参数：

| 参数 | 含义 |
|------|------|
| 第1个 | 输出通道数（可选） |
| 第2个 | reduction 比例 |
| 第3个 | num_heads 数量 |

```yaml
# 使用默认参数
- [-1, 1, YourModule, []]

# 指定输出通道
- [-1, 1, YourModule, [256]]

# 指定所有参数
- [-1, 1, YourModule, [256, 16, 4]]

# BiFPN_Concat 指定融合后输出通道
- [[-1, 6], 1, BiFPN_Concat, [512]]
```

## 完整示例

```yaml
# YOLO11 backbone with custom attention
backbone:
  - [0, -1, Conv, [64, 3, 2]]  # 0-P1/2
  - [1, -1, Conv, [128, 3, 2]]  # 1-P2/4
  - [2, -1, CoordAtt, [128]]  # 添加坐标注意力
  - [3, -1, C3k2, [128]]
  - [4, -1, Conv, [256, 3, 2]]  # 3-P3/8
  - [5, -1, BiCoordCrossAtt, [256, 16, 8]]  # 双向坐标交叉注意力
  - [6, -1, C3k2, [256]]
```

## 注释格式

```yaml
- [-1, 1, Conv, [64, 3, 2]]  # 0-P1/2  ← 层索引注释
- [-1, 1, CoordAtt, [256]]   # 添加注意力模块
```
